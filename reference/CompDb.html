<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Simple compound (metabolite) databases — CompDb • CompoundDb</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Simple compound (metabolite) databases — CompDb" />
<meta property="og:description" content="CompDb objects provide access to general (metabolite) compound
annotations along with metadata information such as the annotation's
source, date and release version. The data is stored internally in a
database (usually an SQLite database).
CompDb constructs a CompDb object by connecting
to the provided database file.
hasMsMsSpectra returns TRUE if MS/MS spectrum data is
available in the database and FALSE otherwise.
src_compdb provides access to the CompDb's database via
the functionality from the dplyr/dbplyr package.
tables returns a named list (names being table names) with
the fields/columns from each table in the database.
dbconn returns the connection (DBIConnection) to the
database." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CompoundDb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/create-compounddb.html">Creating CompoundDb annotation resources</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/EuracBiomedicalResearch/CompoundDb/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simple compound (metabolite) databases</h1>
    <small class="dont-index">Source: <a href='https://github.com/EuracBiomedicalResearch/CompoundDb/blob/master/R/CompDb.R'><code>R/CompDb.R</code></a>, <a href='https://github.com/EuracBiomedicalResearch/CompoundDb/blob/master/R/CompDb-methods.R'><code>R/CompDb-methods.R</code></a></small>
    <div class="hidden name"><code>CompDb.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>CompDb</code> objects provide access to general (metabolite) compound
annotations along with <em>metadata</em> information such as the annotation's
source, date and release version. The data is stored internally in a
database (usually an SQLite database).</p>
<p><code>CompDb</code> <em>constructs</em> a <code>CompDb</code> object by connecting
to the provided database file.</p>
<p><code>hasMsMsSpectra</code> returns <code>TRUE</code> if MS/MS spectrum data is
available in the database and <code>FALSE</code> otherwise.</p>
<p><code>src_compdb</code> provides access to the <code>CompDb</code>'s database <em>via</em>
the functionality from the <code>dplyr</code>/<code>dbplyr</code> package.</p>
<p><code>tables</code> returns a named <code>list</code> (names being table names) with
the fields/columns from each table in the database.</p>
<p><code>dbconn</code> returns the connection (<code>DBIConnection</code>) to the
database.</p>
    </div>

    <pre class="usage"><span class='fu'>show</span><span class='op'>(</span><span class='va'>object</span><span class='op'>)</span>

<span class='fu'>CompDb</span><span class='op'>(</span><span class='va'>x</span>, flags <span class='op'>=</span> <span class='fu'>RSQLite</span><span class='fu'>::</span><span class='va'><a href='https://rsqlite.r-dbi.org/reference/SQLite.html'>SQLITE_RO</a></span><span class='op'>)</span>

<span class='fu'>hasMsMsSpectra</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>compounds</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>columns</span>, <span class='va'>filter</span>, return.type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"data.frame"</span>, <span class='st'>"tibble"</span><span class='op'>)</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>src_compdb</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='fu'>tables</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='co'># S4 method for CompDb</span>
<span class='fu'>dbconn</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>

<span class='co'># S4 method for CompDb</span>
<span class='fu'>Spectra</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>columns</span>, <span class='va'>filter</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for CompDb</span>
<span class='fu'>supportedFilters</span><span class='op'>(</span><span class='va'>object</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>For <code>CompDb</code>: <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code> with the file name of the SQLite
compound database. Alternatively it is possible to provide the connection
to the database with parameter <code>x</code>.</p><pre>For all other methods: a `CompDb` object.
</pre></td>
    </tr>
    <tr>
      <th>flags</th>
      <td><p>flags passed to the SQLite database connection.
See <code>SQLite()</code>. Defaults to read-only, i.e. RSQLite::SQLITE_RO.</p></td>
    </tr>
    <tr>
      <th>columns</th>
      <td><p>For <code>compounds</code>, <code>Spectra</code>: <code>character</code> with the names of the
database columns that should be retrieved. Use <code>tables()</code> for a list of
available column names.</p></td>
    </tr>
    <tr>
      <th>filter</th>
      <td><p>For <code>compounds</code> and <code>Spectra</code>: filter expression or
<code>AnnotationFilter()</code> defining a filter to be used to retrieve specific
elements from the database.</p></td>
    </tr>
    <tr>
      <th>return.type</th>
      <td><p>For <code>compounds</code>: either <code>"data.frame"</code> or <code>"tibble"</code> to
return the result as a <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame()</a></code> or <code>tibble()</code>, respectively.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments. Currently not used.</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>For all methods: a <code>CompDb</code> object.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>CompDb</code> objects should be created using the constructor function
<code>CompDb</code> providing the name of the (SQLite) database file providing
the compound annotation data.</p>
    <h2 class="hasAnchor" id="retrieve-annotations-from-the-database"><a class="anchor" href="#retrieve-annotations-from-the-database"></a>Retrieve annotations from the database</h2>

    


<p>Annotations/compound informations can be retrieved from a <code>CompDb</code> database
with the <code>compounds</code> and <code>Spectra</code> functions:</p><ul>
<li><p><code>compounds</code> extracts compound data from the <code>CompDb</code> object. In contrast
to <code>src_compdb</code> it returns the actual data as a <code>data.frame</code> (if
<code>return.type = "data.frame"</code>) or a <code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble::tibble()</a></code> (if
<code>return.type = "tibble"</code>). A <code>compounds</code> call will always return all
elements from the <em>compound</em> table (unless a <code>filter</code> is used). Also, the
result <code>data.frame</code> will always contain the compound identifier in column
<code>"compound_id"</code>.</p></li>
<li><p><code>Spectra</code> extract spectra from the database and returns them as a
<code>Spectra()</code> object from the <code>Spectra</code> package. Additional annotations
requested with the <code>columns</code> parameter are added as additional spectra
variables.</p></li>
</ul>

    <h2 class="hasAnchor" id="filtering-the-database"><a class="anchor" href="#filtering-the-database"></a>Filtering the database</h2>

    


<p>Data access methods such as <code>compounds</code> and <code>Spectra</code> allow to filter the
results using specific filter classes and expressions. Filtering uses the
concepts from Bioconductor's <code>AnnotationFilter</code> package. All information
for a certain compound with the ID <code>"HMDB0000001"</code> can for example be
retrieved by passing the filter expression
<code>filter = ~ compound_id == "HMDB0000001"</code> to the <code>compounds</code> function.</p>
<p>Use the supportedFilters passing the CompDb object as an argument to
get a list of all supported filters.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='createCompDb.html'>createCompDb()</a></code> for the function to create a SQLite compound database.</p>
<p><code><a href='Filter-classes.html'>CompoundIdFilter()</a></code> for filters that can be used on the <code>CompDb</code> database.</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Johannes Rainer</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Create a small CompDb from a provided HMDB subset</span>
<span class='va'>cmps</span> <span class='op'>&lt;-</span> <span class='fu'><a href='compound_tbl_sdf.html'>compound_tbl_sdf</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"sdf/HMDB_sub.sdf.gz"</span>,
    package <span class='op'>=</span> <span class='st'>"CompoundDb"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: `data_frame()` is deprecated as of tibble 1.1.0.</span>
#&gt; <span class='warning'>Please use `tibble()` instead.</span>
#&gt; <span class='warning'><span style='color: #555555;'>This warning is displayed once every 8 hours.</span><span></span>
#&gt; <span class='warning'></span><span style='color: #555555;'>Call `lifecycle::last_warnings()` to see where this warning was generated.</span><span></span></div><div class='input'><span class='va'>metad</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>name <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"source"</span>, <span class='st'>"url"</span>, <span class='st'>"source_version"</span>,
    <span class='st'>"source_date"</span>, <span class='st'>"organism"</span><span class='op'>)</span>,
    value <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"sub_HMDB"</span>, <span class='st'>"http://www.hmdb.ca"</span>, <span class='st'>"4"</span>, <span class='st'>"2017"</span>, <span class='st'>"Hsapiens"</span><span class='op'>)</span>,
    stringsAsFactors <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'>## Load also MS/MS spectra from HMDB xml files</span>
<span class='va'>xml_path</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"xml"</span>, package <span class='op'>=</span> <span class='st'>"CompoundDb"</span><span class='op'>)</span>
<span class='va'>spctra</span> <span class='op'>&lt;-</span> <span class='fu'><a href='msms_spectra_hmdb.html'>msms_spectra_hmdb</a></span><span class='op'>(</span><span class='va'>xml_path</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Going to process 4 xml files.</span></div><div class='output co'>#&gt; <span class='message'>Postprocessing data ... </span></div><div class='output co'>#&gt; <span class='message'>OK</span></div><div class='input'>
<span class='co'>## Create the SQLite database:</span>
<span class='va'>db_file</span> <span class='op'>&lt;-</span> <span class='fu'><a href='createCompDb.html'>createCompDb</a></span><span class='op'>(</span><span class='va'>cmps</span>, metadata <span class='op'>=</span> <span class='va'>metad</span>, msms_spectra <span class='op'>=</span> <span class='va'>spctra</span>,
    path <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## Create a CompDb object</span>
<span class='va'>cmp_db</span> <span class='op'>&lt;-</span> <span class='fu'>CompDb</span><span class='op'>(</span><span class='va'>db_file</span><span class='op'>)</span>
<span class='va'>cmp_db</span>
</div><div class='output co'>#&gt; class: CompDb 
#&gt;  data source: sub_HMDB 
#&gt;  version: 4 
#&gt;  organism: Hsapiens 
#&gt;  compound count: 9 
#&gt;  MS/MS spectra count: 4 </div><div class='input'>
<span class='co'>## List all tables in the database and their columns</span>
<span class='fu'>tables</span><span class='op'>(</span><span class='va'>cmp_db</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $compound
#&gt; [1] "compound_id" "name"        "inchi"       "inchikey"    "formula"    
#&gt; [6] "exactmass"   "smiles"     
#&gt; 
#&gt; $msms_spectrum
#&gt;  [1] "original_spectrum_id" "compound_id"          "polarity"            
#&gt;  [4] "collision_energy"     "predicted"            "splash"              
#&gt;  [7] "instrument_type"      "instrument"           "precursor_mz"        
#&gt; [10] "spectrum_id"          "msms_mz_range_min"    "msms_mz_range_max"   
#&gt; 
#&gt; $msms_spectrum_peak
#&gt; [1] "spectrum_id" "mz"          "intensity"   "peak_id"    
#&gt; 
#&gt; $synonym
#&gt; [1] "compound_id" "synonym"    
#&gt; </div><div class='input'>
<span class='co'>## Extract a data.frame with the id, name and inchi of all compounds</span>
<span class='fu'>compounds</span><span class='op'>(</span><span class='va'>cmp_db</span>, columns <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"compound_id"</span>, <span class='st'>"name"</span>, <span class='st'>"inchi"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   compound_id                      name
#&gt; 1 HMDB0000001         1-Methylhistidine
#&gt; 2 HMDB0000002        1,3-Diaminopropane
#&gt; 3 HMDB0000005        2-Ketobutyric acid
#&gt; 4 HMDB0000008     2-Hydroxybutyric acid
#&gt; 5 HMDB0000010          2-Methoxyestrone
#&gt; 6 HMDB0000011 (R)-3-Hydroxybutyric acid
#&gt; 7 HMDB0000012              Deoxyuridine
#&gt; 8 HMDB0004370        N-Methyltryptamine
#&gt; 9 HMDB0006719      5,6-trans-Vitamin D3
#&gt;                                                                                                                                                                                             inchi
#&gt; 1                                                                                                         InChI=1S/C7H11N3O2/c1-10-3-5(9-4-10)2-6(8)7(11)12/h3-4,6H,2,8H2,1H3,(H,11,12)/t6-/m0/s1
#&gt; 2                                                                                                                                                              InChI=1S/C3H10N2/c4-2-1-3-5/h1-5H2
#&gt; 3                                                                                                                                                 InChI=1S/C4H6O3/c1-2-3(5)4(6)7/h2H2,1H3,(H,6,7)
#&gt; 4                                                                                                                                            InChI=1S/C4H8O3/c1-2-3(5)4(6)7/h3,5H,2H2,1H3,(H,6,7)
#&gt; 5                                                   InChI=1S/C19H24O3/c1-19-8-7-12-13(15(19)5-6-18(19)21)4-3-11-9-16(20)17(22-2)10-14(11)12/h9-10,12-13,15,20H,3-8H2,1-2H3/t12-,13+,15-,19-/m0/s1
#&gt; 6                                                                                                                                  InChI=1S/C4H8O3/c1-3(5)2-4(6)7/h3,5H,2H2,1H3,(H,6,7)/t3-/m1/s1
#&gt; 7                                                                            InChI=1S/C9H12N2O5/c12-4-6-5(13)3-8(16-6)11-2-1-7(14)10-9(11)15/h1-2,5-6,8,12-13H,3-4H2,(H,10,14,15)/t5-,6+,8+/m0/s1
#&gt; 8                                                                                                                   InChI=1S/C11H14N2/c1-12-7-6-9-8-13-11-5-3-2-4-10(9)11/h2-5,8,12-13H,6-7H2,1H3
#&gt; 9 InChI=1S/C27H44O/c1-19(2)8-6-9-21(4)25-15-16-26-22(10-7-17-27(25,26)5)12-13-23-18-24(28)14-11-20(23)3/h12-13,19,21,24-26,28H,3,6-11,14-18H2,1-2,4-5H3/b22-12+,23-13+/t21-,24+,25-,26?,27-/m1/s1</div><div class='input'>
<span class='co'>## Add also the synonyms (aliases) for the compounds. This will cause the</span>
<span class='co'>## tables compound and synonym to be joined. The elements of the compound_id</span>
<span class='co'>## and name are now no longer unique</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'>compounds</span><span class='op'>(</span><span class='va'>cmp_db</span>, columns <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"compound_id"</span>, <span class='st'>"name"</span>, <span class='st'>"synonym"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   compound_id              name                synonym
#&gt; 1 HMDB0000001 1-Methylhistidine      1 Methylhistidine
#&gt; 2 HMDB0000001 1-Methylhistidine                 1-MHis
#&gt; 3 HMDB0000001 1-Methylhistidine     1-Methyl histidine
#&gt; 4 HMDB0000001 1-Methylhistidine     1-Methyl-Histidine
#&gt; 5 HMDB0000001 1-Methylhistidine   1-Methyl-L-histidine
#&gt; 6 HMDB0000001 1-Methylhistidine 1-N-Methyl-L-histidine</div><div class='input'>
<span class='co'>## Extract spectra for a specific HMDB compound.</span>
<span class='va'>sps</span> <span class='op'>&lt;-</span> <span class='fu'>Spectra</span><span class='op'>(</span><span class='va'>cmp_db</span>, filter <span class='op'>=</span> <span class='op'>~</span> <span class='va'>compound_id</span> <span class='op'>==</span> <span class='st'>"HMDB0000001"</span><span class='op'>)</span>
<span class='va'>sps</span>
</div><div class='output co'>#&gt; MSn data (Spectra) with 2 spectra in a MsBackendCompDb backend:
#&gt;     msLevel     rtime scanIndex
#&gt;   &lt;integer&gt; &lt;numeric&gt; &lt;integer&gt;
#&gt; 1        NA        NA        NA
#&gt; 2        NA        NA        NA
#&gt;  ... 27 more variables/columns.
#&gt;  data source: sub_HMDB 
#&gt;  version: 4 
#&gt;  organism: Hsapiens </div><div class='input'>
<span class='co'>## Using return.type = "tibble" the result will be returned as a "tibble"</span>
<span class='fu'>compounds</span><span class='op'>(</span><span class='va'>cmp_db</span>, return.type <span class='op'>=</span> <span class='st'>"tibble"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 9 x 7</span><span>
#&gt;   compound_id name     inchi          inchikey   formula exactmass smiles       
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>          </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>      </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>        
#&gt; </span><span style='color: #555555;'>1</span><span> HMDB0000001 1-Methy… InChI=1S/C7H1… BRMWTNUJH… C7H11N…     169.  </span><span style='color: #555555;'>"</span><span>CN1C=NC(C[C…
#&gt; </span><span style='color: #555555;'>2</span><span> HMDB0000002 1,3-Dia… InChI=1S/C3H1… XFNJVJPLK… C3H10N2      74.1 </span><span style='color: #555555;'>"</span><span>NCCCN</span><span style='color: #555555;'>"</span><span>      
#&gt; </span><span style='color: #555555;'>3</span><span> HMDB0000005 2-Ketob… InChI=1S/C4H6… TYEYBOSBB… C4H6O3      102.  </span><span style='color: #555555;'>"</span><span>CCC(=O)C(O)…
#&gt; </span><span style='color: #555555;'>4</span><span> HMDB0000008 2-Hydro… InChI=1S/C4H8… AFENDNXGA… C4H8O3      104.  </span><span style='color: #555555;'>"</span><span>CCC(O)C(O)=…
#&gt; </span><span style='color: #555555;'>5</span><span> HMDB0000010 2-Metho… InChI=1S/C19H… WHEUWNKSC… C19H24…     300.  </span><span style='color: #555555;'>"</span><span>[H][C@@]12C…
#&gt; </span><span style='color: #555555;'>6</span><span> HMDB0000011 (R)-3-H… InChI=1S/C4H8… WHBMMWSBF… C4H8O3      104.  </span><span style='color: #555555;'>"</span><span>C[C@@H](O)C…
#&gt; </span><span style='color: #555555;'>7</span><span> HMDB0000012 Deoxyur… InChI=1S/C9H1… MXHRCPNRJ… C9H12N…     228.  </span><span style='color: #555555;'>"</span><span>OC[C@H]1O[C…
#&gt; </span><span style='color: #555555;'>8</span><span> HMDB0004370 N-Methy… InChI=1S/C11H… NCIKQJBVU… C11H14…     174.  </span><span style='color: #555555;'>"</span><span>CNCCC1=CNC2…
#&gt; </span><span style='color: #555555;'>9</span><span> HMDB0006719 5,6-tra… InChI=1S/C27H… QYSXJUFSX… C27H44O     384.  </span><span style='color: #555555;'>"</span><span>CC(C)CCC[C@…</div><div class='input'>
<span class='co'>## Use the CompDb in a dplyr setup</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: 'dplyr'</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from 'package:S4Vectors':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    first, intersect, rename, setdiff, setequal, union</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from 'package:BiocGenerics':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    combine, intersect, setdiff, union</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from 'package:stats':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter, lag</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from 'package:base':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, setequal, union</span></div><div class='input'><span class='va'>src_cmp</span> <span class='op'>&lt;-</span> <span class='fu'>src_compdb</span><span class='op'>(</span><span class='va'>cmp_db</span><span class='op'>)</span>
<span class='va'>src_cmp</span>
</div><div class='output co'>#&gt; src:  sqlite 3.33.0 [/tmp/RtmppylJXz/CompDb.Hsapiens.sub_HMDB.4.sqlite]
#&gt; tbls: compound, metadata, msms_spectrum, msms_spectrum_peak, synonym</div><div class='input'>
<span class='co'>## Get a tbl for the compound table</span>
<span class='va'>cmp_tbl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span><span class='op'>(</span><span class='va'>src_cmp</span>, <span class='st'>"compound"</span><span class='op'>)</span>

<span class='co'>## Extract the id, name and inchi</span>
<span class='va'>cmp_tbl</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>compound_id</span>, <span class='va'>name</span>, <span class='va'>inchi</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/compute.html'>collect</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 9 x 3</span><span>
#&gt;   compound_id name              inchi                                           
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>             </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>                                           
#&gt; </span><span style='color: #555555;'>1</span><span> HMDB0000001 1-Methylhistidine InChI=1S/C7H11N3O2/c1-10-3-5(9-4-10)2-6(8)7(11)…
#&gt; </span><span style='color: #555555;'>2</span><span> HMDB0000002 1,3-Diaminopropa… InChI=1S/C3H10N2/c4-2-1-3-5/h1-5H2              
#&gt; </span><span style='color: #555555;'>3</span><span> HMDB0000005 2-Ketobutyric ac… InChI=1S/C4H6O3/c1-2-3(5)4(6)7/h2H2,1H3,(H,6,7) 
#&gt; </span><span style='color: #555555;'>4</span><span> HMDB0000008 2-Hydroxybutyric… InChI=1S/C4H8O3/c1-2-3(5)4(6)7/h3,5H,2H2,1H3,(H…
#&gt; </span><span style='color: #555555;'>5</span><span> HMDB0000010 2-Methoxyestrone  InChI=1S/C19H24O3/c1-19-8-7-12-13(15(19)5-6-18(…
#&gt; </span><span style='color: #555555;'>6</span><span> HMDB0000011 (R)-3-Hydroxybut… InChI=1S/C4H8O3/c1-3(5)2-4(6)7/h3,5H,2H2,1H3,(H…
#&gt; </span><span style='color: #555555;'>7</span><span> HMDB0000012 Deoxyuridine      InChI=1S/C9H12N2O5/c12-4-6-5(13)3-8(16-6)11-2-1…
#&gt; </span><span style='color: #555555;'>8</span><span> HMDB0004370 N-Methyltryptami… InChI=1S/C11H14N2/c1-12-7-6-9-8-13-11-5-3-2-4-1…
#&gt; </span><span style='color: #555555;'>9</span><span> HMDB0006719 5,6-trans-Vitami… InChI=1S/C27H44O/c1-19(2)8-6-9-21(4)25-15-16-26…</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jan Stanstrup, Johannes Rainer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


